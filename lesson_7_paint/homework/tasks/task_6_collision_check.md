# üõ°Ô∏è –ë–ª–æ–∫ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π

## üéØ –¶–µ–ª—å

–†–æ–±–æ—Ç "–≤–∏–¥–∏—Ç" –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–æ–µ–∑–∂–∞–µ—Ç —Å–∫–≤–æ–∑—å –Ω–∏—Ö! –ü–æ—Ä–∞ –Ω–∞—É—á–∏—Ç—å –µ–≥–æ **–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è** –ø–µ—Ä–µ–¥ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏.

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ –≤ **–ø–µ—Ä–µ–¥–Ω–µ–º —Å–µ–∫—Ç–æ—Ä–µ** –µ—Å—Ç—å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è ‚Üí –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ **–≤–ø–µ—Ä—ë–¥**
- –î–≤–∏–∂–µ–Ω–∏–µ **–Ω–∞–∑–∞–¥** ‚Äî –≤—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ (–∏–ª–∏ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∑–∞–¥–Ω–∏–π —Å–µ–∫—Ç–æ—Ä)
- **–ü–æ–≤–æ—Ä–æ—Ç** ‚Äî –≤—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à—ë–Ω

---

## üß† –¢–µ–æ—Ä–∏—è: –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç?**
- **–ü–µ—Ä–µ–¥** —Ç–µ–º –∫–∞–∫ –¥–≤–∏–≥–∞—Ç—å—Å—è, —Ä–æ–±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: "–ê –Ω–µ –≤—Ä–µ–∂—É—Å—å –ª–∏ —è?"
- –ï—Å–ª–∏ –≤–ø–µ—Ä–µ–¥–∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ ‚Üí —Ä–æ–±–æ—Ç **–Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é** (—Å—Ç–æ–∏—Ç –Ω–∞ –º–µ—Å—Ç–µ)
- –ï—Å–ª–∏ –ø—É—Ç—å —Å–≤–æ–±–æ–¥–µ–Ω ‚Üí —Ä–æ–±–æ—Ç **–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é** –∫–∞–∫ –æ–±—ã—á–Ω–æ

```python
# –ü—Å–µ–≤–¥–æ–∫–æ–¥
if —Ö–æ—á—É_–µ—Ö–∞—Ç—å_–≤–ø–µ—Ä—ë–¥:
    if –µ—Å—Ç—å_–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ_–≤–ø–µ—Ä–µ–¥–∏:
        # –ù–µ –¥–≤–∏–≥–∞—é—Å—å!
        pass
    else:
        # –î–≤–∏–≥–∞—é—Å—å –≤–ø–µ—Ä—ë–¥
        x += velocity * cos(angle) * dt
```

---

## üß† –¢–µ–æ—Ä–∏—è: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–≤–æ—Ä–æ—Ç–∞ –∏ –¥–≤–∏–∂–µ–Ω–∏—è

**–í–∞–∂–Ω–æ:** –†–æ–±–æ—Ç –º–æ–∂–µ—Ç **–ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è –≤—Å–µ–≥–¥–∞**, –¥–∞–∂–µ –µ—Å–ª–∏ –≤–ø–µ—Ä–µ–¥–∏ —Å—Ç–µ–Ω–∞!

```python
# –í—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ–º —É–≥–æ–ª (–ø–æ–≤–æ—Ä–æ—Ç)
angle += angular_velocity * dt

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ
if linear_velocity > 0:  # –ï–¥–µ–º –≤–ø–µ—Ä—ë–¥
    if –ø—É—Ç—å_—Å–≤–æ–±–æ–¥–µ–Ω:
        x += linear_velocity * cos(angle) * dt
        y += linear_velocity * sin(angle) * dt
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–æ–±–æ—Ç—É **—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å—Å—è** —É —Å—Ç–µ–Ω—ã, –∞ –Ω–µ –∑–∞—Å—Ç—Ä—è—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞.

---

## üìù –ó–∞–¥–∞–Ω–∏–µ 6.1: –ú–µ—Ç–æ–¥ update_with_collision_check

–°–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è.

**–û—Ç–∫—Ä–æ–π—Ç–µ `robot.py` –∏ –¥–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥:**

```python
    def update_with_collision_check(self, dt, grid):
        """
        –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é —Ä–æ–±–æ—Ç–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π

        –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–¥–Ω–∏–π —Å–µ–∫—Ç–æ—Ä (¬±45¬∞) –ø–µ—Ä–µ–¥ –¥–≤–∏–∂–µ–Ω–∏–µ–º –≤–ø–µ—Ä–µ–¥.
        –ï—Å–ª–∏ –≤ —Å–µ–∫—Ç–æ—Ä–µ –µ—Å—Ç—å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ - –∑–∞–ø—Ä–µ—â–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ.
        –ù–∞–∑–∞–¥ –º–æ–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –≤—Å–µ–≥–¥–∞ (–∏–ª–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∑–∞–¥–Ω–µ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞).
        –ü–æ–≤–æ—Ä–æ—Ç –≤—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω.

        Args:
            dt: –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∞–≥
            grid: –æ–±—ä–µ–∫—Ç Grid –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
        """
        # TODO: –®–∞–≥ 1 - –û–±–Ω–æ–≤–ª—è–µ–º —É–≥–æ–ª (–ø–æ–≤–æ—Ä–æ—Ç –≤—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω)
        self.angle += self.angular_velocity * ___
        self.angle = self.angle % (2 * math.pi)

        # TODO: –®–∞–≥ 2 - –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å –ª–∏–Ω–µ–π–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
        if abs(self.linear_velocity) > 0.01:  # –ï—Å–ª–∏ –µ–¥–µ–º
            can_move = True  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–∑—Ä–µ—à–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ

            # TODO: –ï—Å–ª–∏ –¥–≤–∏–≥–∞–µ–º—Å—è –≤–ø–µ—Ä–µ–¥ - –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–¥–Ω–∏–π —Å–µ–∫—Ç–æ—Ä
            if self.linear_velocity > ___:  # 0 (–≤–ø–µ—Ä—ë–¥ = –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
                # –ü–æ–ª—É—á–∞–µ–º –∫–ª–µ—Ç–∫–∏ –ø–µ—Ä–µ–¥–Ω–µ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞
                forward_cells = self.___(___)  # get_forward_sector_cells(grid)

                # TODO: –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –≤ —Å–µ–∫—Ç–æ—Ä–µ
                for col, row in forward_cells:
                    if grid.___(col, row):  # is_cell_filled
                        can_move = ___  # False - –∑–∞–ø—Ä–µ—â–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ
                        break  # –ù–∞—à–ª–∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ - —Ö–≤–∞—Ç–∏—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å

            # TODO: –ï—Å–ª–∏ –º–æ–∂–µ–º –¥–≤–∏–≥–∞—Ç—å—Å—è - –æ–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é
            if can_move:
                self.x += self.linear_velocity * math.cos(self.___) * dt
                self.y += self.linear_velocity * math.___(self.angle) * dt
            # –ï—Å–ª–∏ can_move == False - —Ä–æ–±–æ—Ç –ø—Ä–æ—Å—Ç–æ —Å—Ç–æ–∏—Ç –Ω–∞ –º–µ—Å—Ç–µ
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª.**

---

## üìù –ó–∞–¥–∞–Ω–∏–µ 6.2: –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤ main.py

–¢–µ–ø–µ—Ä—å –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ `update()` –∏—Å–ø–æ–ª—å–∑—É–µ–º `update_with_collision_check()`.

**–û—Ç–∫—Ä–æ–π—Ç–µ `main.py` –∏ –Ω–∞–π–¥–∏—Ç–µ –±–ª–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ–±–æ—Ç–∞:**

–ó–∞–º–µ–Ω–∏—Ç–µ:

```python
        # –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–±–æ—Ç–∞ —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ ROBOT
        if mode_manager.is_robot_mode():
            # –°–¢–ê–†–´–ô –ö–û–î - –£–î–ê–õ–ò–¢–ï:
            # robot.update(dt=0.016)

            # TODO: –ù–û–í–´–ô –ö–û–î - –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
            robot.___(dt=0.016, grid=___)  # update_with_collision_check

            # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–æ–±–æ—Ç–∞ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –∫–∞—Ä—Ç—ã
            robot.clamp_position(robot.radius, grid.cols - robot.radius,
                                robot.radius, grid.rows - robot.radius)
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª.**

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É:**

```bash
python main.py
```

### –¢–µ—Å—Ç 1: –†–∏—Å—É–µ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ

1. **–†–µ–∂–∏–º MAP_EDIT** (–Ω–∞—á–∞–ª—å–Ω—ã–π)
2. –ù–∞—Ä–∏—Å—É–π—Ç–µ —Å—Ç–µ–Ω—É –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª–µ—Ç–æ–∫

### –¢–µ—Å—Ç 2: –î–≤–∏–∂–µ–Ω–∏–µ –∫ —Å—Ç–µ–Ω–µ

1. **TAB** ‚Üí —Ä–µ–∂–∏–º ROBOT
2. –ù–∞–±–ª—é–¥–∞–π—Ç–µ:
   - –°–≤–µ—Ç–ª–æ-—Å–∏–Ω—è—è –∑–æ–Ω–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è ‚úÖ
   - –ñ—ë–ª—Ç—ã–π –ø–µ—Ä–µ–¥–Ω–∏–π —Å–µ–∫—Ç–æ—Ä ‚úÖ
3. –ù–∞–∂–º–∏—Ç–µ **W** (–µ—Ö–∞—Ç—å –≤–ø–µ—Ä—ë–¥ –∫ —Å—Ç–µ–Ω–µ)
4. –ö–æ–≥–¥–∞ —Å—Ç–µ–Ω–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø–µ—Ä–µ–¥–Ω–∏–π —Å–µ–∫—Ç–æ—Ä:
   - –ö–ª–µ—Ç–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è **–∫—Ä–∞—Å–Ω—ã–º–∏** ‚úÖ
   - –†–æ–±–æ—Ç **–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è**! üéâ
   - –†–æ–±–æ—Ç **–Ω–µ –ø—Ä–æ–µ–∑–∂–∞–µ—Ç —Å–∫–≤–æ–∑—å —Å—Ç–µ–Ω—É**! ‚úÖ

### –¢–µ—Å—Ç 3: –ü–æ–≤–æ—Ä–æ—Ç —É —Å—Ç–µ–Ω—ã

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å –ø–µ—Ä–µ–¥ —Å—Ç–µ–Ω–æ–π (W –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
2. –ù–∞–∂–º–∏—Ç–µ **A** –∏–ª–∏ **D** (–ø–æ–≤–æ—Ä–æ—Ç)
3. –†–æ–±–æ—Ç **–ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ** ‚úÖ
4. –ü–æ–≤–µ—Ä–Ω–∏—Ç–µ —Ç–∞–∫, —á—Ç–æ–±—ã —Å—Ç–µ–Ω–∞ –±—ã–ª–∞ —Å–±–æ–∫—É/—Å–∑–∞–¥–∏
5. –ù–∞–∂–º–∏—Ç–µ **W** ‚Äî —Ä–æ–±–æ—Ç —Å–Ω–æ–≤–∞ –µ–¥–µ—Ç! ‚úÖ

### –¢–µ—Å—Ç 4: –î–≤–∏–∂–µ–Ω–∏–µ –Ω–∞–∑–∞–¥

1. –ü–æ–¥—ä–µ–¥—å—Ç–µ –∫ —Å—Ç–µ–Ω–µ
2. –ù–∞–∂–º–∏—Ç–µ **S** (–Ω–∞–∑–∞–¥)
3. –†–æ–±–æ—Ç **–æ—Ç—ä–µ–∑–∂–∞–µ—Ç** –æ—Ç —Å—Ç–µ–Ω—ã ‚úÖ

### –¢–µ—Å—Ç 5: –£–≥–ª–æ–≤—ã–µ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è

1. –ü–æ–¥—ä–µ–¥—å—Ç–µ –∫ —É–≥–ª—É –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ "–ø—Ä–æ—Ç–∏—Å–Ω—É—Ç—å—Å—è" –ø–æ–¥ —É–≥–ª–æ–º
3. –†–æ–±–æ—Ç **–Ω–µ –ø—Ä–æ–µ–∑–∂–∞–µ—Ç**, –µ—Å–ª–∏ –≤ –ø–µ—Ä–µ–¥–Ω–µ–º —Å–µ–∫—Ç–æ—Ä–µ –µ—Å—Ç—å –∫–ª–µ—Ç–∫–∞ ‚úÖ

### –¢–µ—Å—Ç 6: –õ–∞–±–∏—Ä–∏–Ω—Ç

1. **TAB** ‚Üí —Ä–µ–∂–∏–º MAP_EDIT
2. –ù–∞—Ä–∏—Å—É–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π –ª–∞–±–∏—Ä–∏–Ω—Ç
3. **TAB** ‚Üí —Ä–µ–∂–∏–º ROBOT
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ–µ—Ö–∞—Ç—å –ª–∞–±–∏—Ä–∏–Ω—Ç —Å –ø–æ–º–æ—â—å—é WASD ‚úÖ

**–û—Ç–ª–∏—á–Ω–æ! –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç! üéâüõ°Ô∏è**

---

## üìù –ó–∞–¥–∞–Ω–∏–µ 6.3: –ë–û–ù–£–° - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–¥–Ω–µ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–µ–π—á–∞—Å —Ä–æ–±–æ—Ç –º–æ–∂–µ—Ç –µ—Ö–∞—Ç—å –Ω–∞–∑–∞–¥ –≤—Å–µ–≥–¥–∞. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∑–∞–¥–Ω–µ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞.

**–í `robot.py`, –º–µ—Ç–æ–¥ `update_with_collision_check`, –¥–æ–±–∞–≤—å—Ç–µ:**

```python
            # –ï—Å–ª–∏ –¥–≤–∏–≥–∞–µ–º—Å—è –≤–ø–µ—Ä–µ–¥ - –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–¥–Ω–∏–π —Å–µ–∫—Ç–æ—Ä
            if self.linear_velocity > 0:
                forward_cells = self.get_forward_sector_cells(grid)
                for col, row in forward_cells:
                    if grid.is_cell_filled(col, row):
                        can_move = False
                        break

            # TODO: –ë–û–ù–£–° - –ï—Å–ª–∏ –¥–≤–∏–≥–∞–µ–º—Å—è –Ω–∞–∑–∞–¥ - –ø—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–¥–Ω–∏–π —Å–µ–∫—Ç–æ—Ä
            elif self.linear_velocity < 0:
                # –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–æ–±–æ—Ç–∞, –ø–æ–≤—ë—Ä–Ω—É—Ç–æ–≥–æ –Ω–∞ 180¬∞
                import math
                backward_angle = self.angle + math.pi  # +180¬∞

                # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π —É–≥–æ–ª
                old_angle = self.angle
                self.angle = backward_angle

                # –ü–æ–ª—É—á–∞–µ–º —Å–µ–∫—Ç–æ—Ä (—Ç–µ–ø–µ—Ä—å —ç—Ç–æ –∑–∞–¥–Ω–∏–π —Å–µ–∫—Ç–æ—Ä)
                backward_cells = self.get_forward_sector_cells(grid)

                # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É–≥–æ–ª
                self.angle = old_angle

                # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
                for col, row in backward_cells:
                    if grid.is_cell_filled(col, row):
                        can_move = False
                        break
```

–¢–µ–ø–µ—Ä—å —Ä–æ–±–æ—Ç –Ω–µ —Å–º–æ–∂–µ—Ç –µ—Ö–∞—Ç—å –Ω–∞–∑–∞–¥, –µ—Å–ª–∏ —Ç–∞–º —Å—Ç–µ–Ω–∞!

---

## üéì –ß—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏?

1. ‚úÖ **–ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è **–ø–µ—Ä–µ–¥** –¥–≤–∏–∂–µ–Ω–∏–µ–º
2. ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–≤–æ—Ä–æ—Ç–∞ –∏ –¥–≤–∏–∂–µ–Ω–∏—è** ‚Äî –ø–æ–≤–æ—Ä–æ—Ç –≤—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à—ë–Ω
3. ‚úÖ **–£—Å–ª–æ–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ** ‚Äî `if can_move: –æ–±–Ω–æ–≤–∏—Ç—å_–ø–æ–∑–∏—Ü–∏—é`
4. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥–Ω–µ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞** ‚Äî –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º –∫–ª–µ—Ç–∫–∏ –∏ –∏—â–µ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
5. ‚úÖ **–§–ª–∞–≥ can_move** ‚Äî –µ–¥–∏–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è/–∑–∞–ø—Ä–µ—Ç–∞ –¥–≤–∏–∂–µ–Ω–∏—è
6. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–∏–∑–∏–∫–∏ –∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π** ‚Äî –æ–¥–∏–Ω –º–µ—Ç–æ–¥ `update_with_collision_check`

---

## üí° –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```
–ö–∞–∂–¥—ã–π –∫–∞–¥—Ä (–≤ —Ä–µ–∂–∏–º–µ ROBOT):

1. input_manager.update_robot_velocities()
   ‚Üí –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º linear_velocity –∏ angular_velocity
   ‚Üí –ù–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–∂–∞—Ç—ã—Ö –∫–ª–∞–≤–∏—à WASD

2. robot.update_with_collision_check(dt, grid)

   –®–∞–≥ 1: –ü–æ–≤–æ—Ä–æ—Ç (–≤—Å–µ–≥–¥–∞)
   ‚Üí angle += angular_velocity * dt

   –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è (–µ—Å–ª–∏ linear_velocity != 0)
   ‚Üí –ï—Å–ª–∏ –µ–¥–µ–º –≤–ø–µ—Ä—ë–¥ (velocity > 0):
     ‚Üí –ü–æ–ª—É—á–∞–µ–º forward_cells = get_forward_sector_cells()
     ‚Üí –ü—Ä–æ–≤–µ—Ä—è–µ–º: –µ—Å—Ç—å –ª–∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è?
     ‚Üí –ï—Å–ª–∏ –µ—Å—Ç—å: can_move = False

   –®–∞–≥ 3: –î–≤–∏–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ can_move == True)
   ‚Üí x += linear_velocity * cos(angle) * dt
   ‚Üí y += linear_velocity * sin(angle) * dt

3. robot.clamp_position(...)
   ‚Üí –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –∫–∞—Ä—Ç—ã

4. renderer.draw_robot(robot, grid)
   ‚Üí –†–∏—Å—É–µ–º —Ä–æ–±–æ—Ç–∞ –≤ –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
```

---

## üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é!

**–í—ã —Å–æ–∑–¥–∞–ª–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ä–æ–±–æ—Ç–∞ —Å —Ñ–∏–∑–∏–∫–æ–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π!**

### –ß—Ç–æ —É–º–µ–µ—Ç –≤–∞—à —Ä–æ–±–æ—Ç:

- ‚úÖ –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Å float –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WASD (–≤–ø–µ—Ä—ë–¥, –Ω–∞–∑–∞–¥, –ø–æ–≤–æ—Ä–æ—Ç—ã)
- ‚úÖ –ó–æ–Ω—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (—Ä–∞–¥–∏—É—Å 2)
- ‚úÖ –ü–µ—Ä–µ–¥–Ω–∏–π —Å–µ–∫—Ç–æ—Ä (¬±45¬∞)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
- ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏
- ‚úÖ –ü–æ–≤–æ—Ä–æ—Ç –Ω–∞ –º–µ—Å—Ç–µ —É —Å—Ç–µ–Ω—ã
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–æ–Ω (—Å–∏–Ω—è—è, –∂—ë–ª—Ç–∞—è, –∫—Ä–∞—Å–Ω–∞—è)
- ‚úÖ –î–≤–∞ —Ä–µ–∂–∏–º–∞: —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–∞—Ä—Ç—ã + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–±–æ—Ç–æ–º

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ (–ë–û–ù–£–°)

–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ! –ù–æ –±—ã–ª–æ –±—ã –∑–¥–æ—Ä–æ–≤–æ –≤–∏–¥–µ—Ç—å **—Å—Ç–∞—Ç—É—Å —Ä–æ–±–æ—Ç–∞** –Ω–∞ —ç–∫—Ä–∞–Ω–µ:
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- –£–≥–æ–ª
- –°–∫–æ—Ä–æ—Å—Ç–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –≤ –∑–æ–Ω–∞—Ö

**–î–∞–ª—å—à–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):** –î–æ–±–∞–≤–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—É—é –ø–∞–Ω–µ–ª—å —Å–ª–µ–≤–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ —Ä–æ–±–æ—Ç–∞!
