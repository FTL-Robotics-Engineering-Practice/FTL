# üéÆ –ë–ª–æ–∫ 6: InputManager —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π (20-30 –º–∏–Ω)

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

–°–µ–π—á–∞—Å –≤ main.py –≤—Å—è –ª–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –º—ã—à–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à
- –§–ª–∞–≥–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –í—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ grid –∏ history

**–ß—Ç–æ –Ω–µ —Ç–∞–∫:**
- main.py —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –∏ —Å–ª–æ–∂–Ω—ã–π
- –¢—Ä—É–¥–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
- –õ–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–º–µ—à–∞–Ω–∞ —Å –∏–≥—Ä–æ–≤—ã–º —Ü–∏–∫–ª–æ–º

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–¥–∏–º –∫–ª–∞—Å—Å InputManager, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –í–°–ï–ú –≤–≤–æ–¥–æ–º!

---

## üß† –ò–¥–µ—è: –ü—Ä–∏–≤—è–∑–∫–∞ –∫–ª–∞–≤–∏—à

–í–º–µ—Å—Ç–æ –∫—É—á–∏ `if event.key == pygame.K_z:` —Å–æ–∑–¥–∞–¥–∏–º **—Å–∏—Å—Ç–µ–º—É –ø—Ä–∏–≤—è–∑–æ–∫ –∫–ª–∞–≤–∏—à**:

```python
# –ü—Ä–∏–≤—è–∂–µ–º –∫–ª–∞–≤–∏—à—É –∫ —Ñ—É–Ω–∫—Ü–∏–∏
input_manager.bind_key(pygame.K_z, "–æ—Ç–º–µ–Ω–∏—Ç—å", —Ñ—É–Ω–∫—Ü–∏—è_–æ—Ç–º–µ–Ω—ã)
input_manager.bind_key(pygame.K_c, "–æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë", —Ñ—É–Ω–∫—Ü–∏—è_–æ—á–∏—Å—Ç–∫–∏)
input_manager.bind_key(pygame.K_h, "—Å–ø—Ä–∞–≤–∫–∞", —Ñ—É–Ω–∫—Ü–∏—è_—Å–ø—Ä–∞–≤–∫–∏)
```

–¢–µ–ø–µ—Ä—å –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã!

---

## üìù –ó–∞–¥–∞–Ω–∏–µ 6.1: –°–æ–∑–¥–∞—ë–º input_manager.py (15 –º–∏–Ω)

**–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `input_manager.py` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ:**

```python
"""–ú–æ–¥—É–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–≤–æ–¥–æ–º —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ –º—ã—à–∏"""
import pygame

class InputManager:
    """–ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º –≤–≤–æ–¥–æ–º (–º—ã—à—å + –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞)"""

    def __init__(self, grid, history, running_flag):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –≤–≤–æ–¥–∞

        Args:
            grid: –æ–±—ä–µ–∫—Ç Grid
            history: –æ–±—ä–µ–∫—Ç History
            running_flag: —Å–ø–∏—Å–æ–∫ [True/False] –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ü–∏–∫–ª–æ–º
        """
        self.grid = grid
        self.history = history
        self.running_flag = running_flag

        # –§–ª–∞–≥–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º—ã—à–∏
        self.left_mouse_pressed = False
        self.right_mouse_pressed = False
        self.last_drawn_cell = None
        self.last_erased_cell = None

        # TODO: –°–ª–æ–≤–∞—Ä—å –ø—Ä–∏–≤—è–∑–æ–∫ –∫–ª–∞–≤–∏—à
        # –°—Ç—Ä—É–∫—Ç—É—Ä–∞: {–∫–æ–¥_–∫–ª–∞–≤–∏—à–∏: {'description': –æ–ø–∏—Å–∞–Ω–∏–µ, 'function': —Ñ—É–Ω–∫—Ü–∏—è}}
        self.key_bindings = {}

        # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø—Ä–∏–≤—è–∑–∫–∏ –∫–ª–∞–≤–∏—à
        self._setup_default_bindings()

    def bind_key(self, key, description, function):
        """
        –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫–ª–∞–≤–∏—à—É –∫ —Ñ—É–Ω–∫—Ü–∏–∏

        Args:
            key: –∫–æ–¥ –∫–ª–∞–≤–∏—à–∏ pygame (pygame.K_z, pygame.K_c –∏ —Ç.–¥.)
            description: –æ–ø–∏—Å–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (—Å—Ç—Ä–æ–∫–∞)
            function: —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å
        """
        # TODO: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–∏–≤—è–∑–∫—É –≤ —Å–ª–æ–≤–∞—Ä—å
        self.key_bindings[___] = {
            'description': ___,
            'function': ___
        }

    def _setup_default_bindings(self):
        """–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏ –∫–ª–∞–≤–∏—à –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é"""
        # TODO: –ü—Ä–∏–≤—è–∂–∏—Ç–µ –∫–ª–∞–≤–∏—à–∏ –∫ –º–µ—Ç–æ–¥–∞–º
        self.bind_key(pygame.K_ESCAPE, "–≤—ã—Ö–æ–¥", self._exit_program)
        self.bind_key(pygame.K_h, "–ø–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É", self._show_help)
        self.bind_key(pygame.K_z, "–æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ", self._undo_action)
        self.bind_key(pygame.K_c, "–æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë", self._clear_all)

    def handle_event(self, event):
        """
        –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ pygame

        Args:
            event: –æ–±—ä–µ–∫—Ç —Å–æ–±—ã—Ç–∏—è pygame
        """
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à
        if event.type == pygame.KEYDOWN:
            # TODO: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ –ø—Ä–∏–≤—è–∑–∫–∞ –¥–ª—è —ç—Ç–æ–π –∫–ª–∞–≤–∏—à–∏
            if event.key in self.___:
                # –í—ã–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
                self.key_bindings[event.key]['___']()

        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –º—ã—à–∏ - –Ω–∞–∂–∞—Ç–∏–µ
        elif event.type == pygame.MOUSEBUTTONDOWN:
            self.handle_mouse_button_down(event.button)

        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –º—ã—à–∏ - –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ
        elif event.type == pygame.MOUSEBUTTONUP:
            self.handle_mouse_button_up(event.button)

    def handle_mouse_button_down(self, button):
        """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –º—ã—à–∏"""
        if button == 1:  # –õ–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞
            self.left_mouse_pressed = True
            self.last_drawn_cell = None
        elif button == 3:  # –ü—Ä–∞–≤–∞—è –∫–Ω–æ–ø–∫–∞
            self.right_mouse_pressed = True
            self.last_erased_cell = None

    def handle_mouse_button_up(self, button):
        """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –º—ã—à–∏"""
        if button == 1:  # –õ–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞
            self.left_mouse_pressed = False
            self.last_drawn_cell = None
        elif button == 3:  # –ü—Ä–∞–≤–∞—è –∫–Ω–æ–ø–∫–∞
            self.right_mouse_pressed = False
            self.last_erased_cell = None

    def handle_mouse_motion(self, mouse_x, mouse_y):
        """
        –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏ (—Ä–∏—Å–æ–≤–∞–Ω–∏–µ/—Å—Ç–∏—Ä–∞–Ω–∏–µ)

        Args:
            mouse_x: –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ X –º—ã—à–∏
            mouse_y: –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ Y –º—ã—à–∏
        """
        # –†–∏—Å–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–∂–∞—Ç–æ–π –ª–µ–≤–æ–π –∫–Ω–æ–ø–∫–µ
        if self.left_mouse_pressed:
            cell = self.grid.get_cell_at_position(mouse_x, mouse_y)
            if cell is not None:
                col, row = cell
                if cell != self.last_drawn_cell:
                    self.grid.fill_cell(col, row)
                    self.history.add_action({'type': 'fill', 'cell': (col, row)})
                    self.last_drawn_cell = cell

        # –°—Ç–∏—Ä–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–∂–∞—Ç–æ–π –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–µ
        if self.right_mouse_pressed:
            cell = self.grid.get_cell_at_position(mouse_x, mouse_y)
            if cell is not None:
                col, row = cell
                if cell != self.last_erased_cell:
                    if self.grid.is_cell_filled(col, row):
                        self.grid.clear_cell(col, row)
                        self.history.add_action({'type': 'erase', 'cell': (col, row)})
                    self.last_erased_cell = cell

    # ===== –§—É–Ω–∫—Ü–∏–∏-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ =====

    def _exit_program(self):
        """–í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã"""
        # TODO: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ñ–ª–∞–≥ running –≤ False
        self.running_flag[0] = ___
        print("–í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã")

    def _undo_action(self):
        """–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ"""
        action = self.history.undo()
        if action is not None:
            col, row = action['cell']

            if action['type'] == 'fill':
                # TODO: –û—Ç–º–µ–Ω—è–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ - –æ—á–∏—â–∞–µ–º –∫–ª–µ—Ç–∫—É
                self.grid.___(col, row)
                print(f"–û—Ç–º–µ–Ω–µ–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ ({col}, {row})")

            elif action['type'] == 'erase':
                # TODO: –û—Ç–º–µ–Ω—è–µ–º —Å—Ç–∏—Ä–∞–Ω–∏–µ - –∑–∞–ø–æ–ª–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ
                self.grid.___(col, row)
                print(f"–û—Ç–º–µ–Ω–µ–Ω–æ —Å—Ç–∏—Ä–∞–Ω–∏–µ ({col}, {row})")
        else:
            print("–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞, –Ω–µ—á–µ–≥–æ –æ—Ç–º–µ–Ω—è—Ç—å")

    def _clear_all(self):
        """–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é —Å–µ—Ç–∫—É –∏ –∏—Å—Ç–æ—Ä–∏—é"""
        # TODO: –û—á–∏—Å—Ç–∏—Ç–µ —Å–µ—Ç–∫—É
        self.grid.___()
        # TODO: –û—á–∏—Å—Ç–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é
        self.history.___()
        print("–°–µ—Ç–∫–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è –æ—á–∏—â–µ–Ω—ã")

    def _show_help(self):
        """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é"""
        print("\n" + "="*50)
        print("–£–ü–†–ê–í–õ–ï–ù–ò–ï:")
        print("="*50)

        # TODO: –í—ã–≤–µ–¥–∏—Ç–µ –≤—Å–µ –ø—Ä–∏–≤—è–∑–∫–∏ –∫–ª–∞–≤–∏—à
        for key, binding in self.key_bindings.items():
            # –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞–≤–∏—à–∏
            key_name = pygame.key.name(key).upper()
            description = binding['description']
            print(f"  {key_name} - {description}")

        print("="*50)
        print("–ú–´–®–¨:")
        print("  –õ–ö–ú (–∑–∞–∂–∞—Ç—å) - —Ä–∏—Å–æ–≤–∞—Ç—å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è")
        print("  –ü–ö–ú (–∑–∞–∂–∞—Ç—å) - —Å—Ç–∏—Ä–∞—Ç—å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è")
        print("="*50)
        print(f"–ö–ª–µ—Ç–æ–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ: {len(self.grid.filled_cells)}")
        print(f"–î–µ–π—Å—Ç–≤–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏: {self.history.get_size()}")
        print("="*50 + "\n")
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª.**

---

## üìù –ó–∞–¥–∞–Ω–∏–µ 6.2: –û–±–Ω–æ–≤–ª—è–µ–º main.py (5-10 –º–∏–Ω)

–¢–µ–ø–µ—Ä—å main.py —Å—Ç–∞–Ω–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–æ—â–µ!

**–ó–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `main.py` –Ω–∞ —ç—Ç–æ:**

```python
"""–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–æ–≥—Ä–∞–º–º—ã - —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π"""
import pygame
import sys

from grid import Grid
from history import History
from renderer import Renderer
from input_manager import InputManager

def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã"""
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è pygame
    pygame.init()

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫–Ω–∞
    WIDTH = 800
    HEIGHT = 600
    screen = pygame.display.set_mode((WIDTH, HEIGHT))
    pygame.display.set_caption("–†–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π")

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∫–∏
    GRID_COLS = 75
    GRID_ROWS = 50
    CELL_WIDTH = WIDTH // GRID_COLS
    CELL_HEIGHT = HEIGHT // GRID_ROWS

    # –ß–∞—Å—ã
    clock = pygame.time.Clock()

    # –§–ª–∞–≥ —Ä–∞–±–æ—Ç—ã (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–ø–∏—Å–æ–∫, —á—Ç–æ–±—ã InputManager –º–æ–≥ –µ–≥–æ –∏–∑–º–µ–Ω—è—Ç—å)
    running = [True]

    # TODO: –°–æ–∑–¥–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç—ã
    grid = Grid(WIDTH, HEIGHT, CELL_WIDTH, CELL_HEIGHT)
    history = History()
    renderer = Renderer(screen)
    input_manager = InputManager(___, ___, ___)

    print("–†–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –∑–∞–ø—É—â–µ–Ω!")
    print("–ù–∞–∂–º–∏—Ç–µ H –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏ –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é")

    # –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
    while running[0]:
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running[0] = False
            else:
                # TODO: –ü–µ—Ä–µ–¥–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏–µ –≤ InputManager
                input_manager.handle_event(___)

        # TODO: –ü–æ–ª—É—á–∏—Ç–µ –ø–æ–∑–∏—Ü–∏—é –º—ã—à–∏ –∏ –ø–µ—Ä–µ–¥–∞–π—Ç–µ –≤ InputManager
        mouse_x, mouse_y = pygame.mouse.get_pos()
        input_manager.handle_mouse_motion(___, ___)

        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–µ—Ç–∫—É –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏
        hover_cell = grid.get_cell_at_position(mouse_x, mouse_y)

        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞
        renderer.draw_grid(grid, hover_cell=hover_cell)

        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞
        pygame.display.flip()
        clock.tick(60)

    # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
    pygame.quit()
    sys.exit()

if __name__ == "__main__":
    main()
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª.**

---

## ‚úÖ –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É:**

```bash
python main.py
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥:**

1. **H** - –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
   ```
   ==================================================
   –£–ü–†–ê–í–õ–ï–ù–ò–ï:
   ==================================================
     ESCAPE - –≤—ã—Ö–æ–¥
     H - –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
     Z - –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ
     C - –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë
   ==================================================
   –ú–´–®–¨:
     –õ–ö–ú (–∑–∞–∂–∞—Ç—å) - —Ä–∏—Å–æ–≤–∞—Ç—å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
     –ü–ö–ú (–∑–∞–∂–∞—Ç—å) - —Å—Ç–∏—Ä–∞—Ç—å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
   ==================================================
   –ö–ª–µ—Ç–æ–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ: 0
   –î–µ–π—Å—Ç–≤–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏: 0
   ==================================================
   ```

2. **C** - –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë (–Ω–∞—Ä–∏—Å—É–π—Ç–µ —á—Ç–æ-—Ç–æ, –ø–æ—Ç–æ–º –Ω–∞–∂–º–∏—Ç–µ C)
3. **Z** - –æ—Ç–º–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç?
4. **ESC** - –≤—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã

---

## üéâ –û—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!

–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- ‚úÖ **grid.py** - —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ **history.py** - —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Å—Ç–æ—Ä–∏–µ–π
- ‚úÖ **renderer.py** - –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –≤—Å—ë
- ‚úÖ **input_manager.py** - —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –≤–≤–æ–¥–æ–º
- ‚úÖ **main.py** - —á–∏—Å—Ç—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª

---

## üéì –ß—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏?

1. ‚úÖ **–ü–∞—Ç—Ç–µ—Ä–Ω "–ú–µ–Ω–µ–¥–∂–µ—Ä –≤–≤–æ–¥–∞"** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. ‚úÖ **–ü—Ä–∏–≤—è–∑–∫–∞ –∫–ª–∞–≤–∏—à** - –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–∞–Ω–¥
3. ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –¥–µ–ª–∞–µ—Ç —Å–≤–æ—ë
4. ‚úÖ **–ß–∏—Å—Ç—ã–π –∫–æ–¥** - main.py —Å—Ç–∞–ª –ø—Ä–æ—Å—Ç—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º

---

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ InputManager:

| –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|------|-------|
| –ö—É—á–∞ if –≤ main.py | –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≤—è–∑–æ–∫ |
| –¢—Ä—É–¥–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É | –û–¥–∏–Ω –≤—ã–∑–æ–≤ bind_key() |
| –õ–æ–≥–∏–∫–∞ —Ä–∞–∑–º–∞–∑–∞–Ω–∞ | –í—Å—ë –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ |
| –ù–µ—Ç —Å–ø—Ä–∞–≤–∫–∏ | –°–ø—Ä–∞–≤–∫–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ (–ë–û–ù–£–°)

–†–µ–¥–∞–∫—Ç–æ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ!

–û—Å—Ç–∞–ª–æ—Å—å –æ–¥–Ω–æ —É–ª—É—á—à–µ–Ω–∏–µ: **—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç –≤ —Ñ–∞–π–ª**.

**–î–∞–ª—å—à–µ (–µ—Å–ª–∏ —É—Å–ø–µ–µ–º):** –î–æ–±–∞–≤–∏–º MapManager –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON —Ñ–∞–π–ª–∞–º–∏!
