# üåü –ó–∞–¥–∞–Ω–∏–µ 5.1: –¢—Ä–∞–µ–∫—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ä–æ–±–æ—Ç–∞ (25 –º–∏–Ω)

**–ü–æ–≤—Ç–æ—Ä—è–µ–º:** –°–ø–∏—Å–∫–∏, –¥–µ–∫–∏, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –≥—Ä–∞—Ñ–∏–∫–∞.

–°–µ–π—á–∞—Å —Ä–æ–±–æ—Ç –¥–≤–∏–∂–µ—Ç—Å—è, –Ω–æ –Ω–µ –≤–∏–¥–Ω–æ, –≥–¥–µ –æ–Ω –±—ã–ª. –î–æ–±–∞–≤–∏–º —Å–ª–µ–¥ ‚Äî –ª–∏–Ω–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –¥–≤–∏–∂–µ–Ω–∏—è!

---

## üß† –¢–µ–æ—Ä–∏—è: –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è

### –ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é?

–ù—É–∂–Ω–æ **–∑–∞–ø–æ–º–∏–Ω–∞—Ç—å** –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏, –≥–¥–µ –±—ã–ª —Ä–æ–±–æ—Ç:

```python
trail = []  # –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫

# –ö–∞–∂–¥—ã–π –∫–∞–¥—Ä –¥–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é
trail.append((robot_x, robot_y))
```

### –ü—Ä–æ–±–ª–µ–º–∞: –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ä–æ—Å—Ç

–ï—Å–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä (60 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É), —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É –±—É–¥–µ—Ç 3600 —Ç–æ—á–µ–∫!

**–†–µ—à–µ–Ω–∏—è:**
1. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–ª–∏–Ω—É —Å–ø–∏—Å–∫–∞ (—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Ç–æ—á–µ–∫)
2. –î–æ–±–∞–≤–ª—è—Ç—å –Ω–µ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä, –∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–≤–∞–ª

### Deque ‚Äî –æ—á–µ—Ä–µ–¥—å —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º

```python
from collections import deque

trail = deque(maxlen=100)  # –ú–∞–∫—Å–∏–º—É–º 100 —Ç–æ—á–µ–∫
trail.append((x, y))  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ deque:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- –ë—ã—Å—Ç—Ä–µ–µ –æ–±—ã—á–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è
- `maxlen` ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞

### –†–∏—Å–æ–≤–∞–Ω–∏–µ –ª–∏–Ω–∏–∏ –ø–æ —Ç–æ—á–∫–∞–º

```python
pygame.draw.lines(screen, color, closed, points, width)
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `screen` ‚Äî –≥–¥–µ —Ä–∏—Å–æ–≤–∞—Ç—å
- `color` ‚Äî —Ü–≤–µ—Ç –ª–∏–Ω–∏–∏
- `closed` ‚Äî –∑–∞–º–∫–Ω—É—Ç–∞—è –ª–∏–Ω–∏—è? (False –¥–ª—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏)
- `points` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–æ—á–µ–∫ `[(x1, y1), (x2, y2), ...]`
- `width` ‚Äî —Ç–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–∏

**–í–∞–∂–Ω–æ:** –ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏!

---

## üìù –ó–∞–¥–∞—á–∞

–°–æ–∑–¥–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º—É —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏:
1. –†–æ–±–æ—Ç –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
2. –°–ª–µ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 150 —Ç–æ—á–∫–∞–º–∏ (—Å—Ç–∞—Ä—ã–µ —Ç–æ—á–∫–∏ –∏—Å—á–µ–∑–∞—é—Ç)
3. –ö–ª–∞–≤–∏—à–∞ **C** (Clear) –æ—á–∏—â–∞–µ—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é
4. ‚≠ê **–ë–æ–Ω—É—Å:** –ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ —Å–ª–µ–¥–∞ (—Å—Ç–∞—Ä—ã–µ —É—á–∞—Å—Ç–∫–∏ –±–ª–µ–¥–Ω–µ–µ)

---

## üîß –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç deque
```python
from collections import deque
```

–î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞, –ø–æ—Å–ª–µ `import math`.

---

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ deque –¥–ª—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
```python
trail = deque(maxlen=150)
```

–ü–∏—à–µ—Ç—Å—è **–¥–æ** –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞, –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏.

**–ü–æ—á–µ–º—É 150?**
- –ü—Ä–∏ 60 FPS —ç—Ç–æ 2.5 —Å–µ–∫—É–Ω–¥—ã –∏—Å—Ç–æ—Ä–∏–∏
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª–∏–Ω–Ω—ã–π —Å–ª–µ–¥, –Ω–æ –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç
- –ú–æ–∂–Ω–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å: 50 (–∫–æ—Ä–æ—Ç–∫–∏–π), 300 (–¥–ª–∏–Ω–Ω—ã–π)

---

### –®–∞–≥ 3: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
```python
# –í –∏–≥—Ä–æ–≤–æ–º —Ü–∏–∫–ª–µ, –ü–û–°–õ–ï –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
trail.append((robot_x, robot_y))
```

**–ì–¥–µ –ø–∏—Å–∞—Ç—å:** –ü–æ—Å–ª–µ –≤—Å–µ—Ö `if keys[pygame.K_w]:` –∏ –ø–æ–≤–æ—Ä–æ—Ç–æ–≤, –Ω–æ –¥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.

**–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–º?**
- –ù—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ–∑–∏—Ü–∏—é –ü–û–°–õ–ï –¥–≤–∏–∂–µ–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–Ω–µ —ç–∫—Ä–∞–Ω–Ω—ã–µ!)

---

### –®–∞–≥ 4: –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
```python
def draw_trail(screen, trail):
    """–†–∏—Å—É–µ—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –¥–≤–∏–∂–µ–Ω–∏—è"""
    if len(trail) < 2:
        return  # –ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏ –¥–ª—è –ª–∏–Ω–∏–∏
```

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Å–ª–µ `draw_robot` –∏ –¥–æ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã –≤–∞–∂–Ω–∞!** `pygame.draw.lines()` —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π, –µ—Å–ª–∏ —Ç–æ—á–µ–∫ –º–µ–Ω—å—à–µ 2.

---

### –®–∞–≥ 5: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
```python
    screen_points = []
    for x, y in trail:
        screen_x = int(x + WIDTH/2)
        screen_y = int(HEIGHT/2 - y)
        screen_points.append((screen_x, screen_y))
```

–ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º —Ç–æ—á–∫–∞–º —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ —ç–∫—Ä–∞–Ω–Ω—ã–µ.

**–í–∞–∂–Ω–æ:** –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –í–°–ï —Ç–æ—á–∫–∏, –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω—é—é!

---

### –®–∞–≥ 6: –†–∏—Å–æ–≤–∞–Ω–∏–µ –ª–∏–Ω–∏–∏
```python
    if len(screen_points) >= 2:
        pygame.draw.lines(screen, (100, 100, 255), False, screen_points, 2)
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `(100, 100, 255)` ‚Äî —Å–≤–µ—Ç–ª–æ-—Å–∏–Ω–∏–π —Ü–≤–µ—Ç
- `False` ‚Äî –Ω–µ –∑–∞–º—ã–∫–∞—Ç—å –ª–∏–Ω–∏—é
- `screen_points` ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ—á–∫–∏
- `2` ‚Äî —Ç–æ–ª—â–∏–Ω–∞ 2 –ø–∏–∫—Å–µ–ª—è

---

### –®–∞–≥ 7: –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Ü–∏–∫–ª–µ
```python
screen.fill(WHITE)

# –°–ù–ê–ß–ê–õ–ê —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è (–≤–Ω–∏–∑—É)
draw_trail(screen, trail)

# –ü–û–¢–û–ú —Ä–æ–±–æ—Ç (—Å–≤–µ—Ä—Ö—É)
draw_robot(screen, robot_x, robot_y, robot_direction, 15)
```

**–ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω!** –°–ª–µ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥ —Ä–æ–±–æ—Ç–æ–º, –Ω–µ –Ω–∞–æ–±–æ—Ä–æ—Ç.

---

### –®–∞–≥ 8: –û—á–∏—Å—Ç–∫–∞ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –∫–ª–∞–≤–∏—à–µ–π C
```python
if event.type == pygame.KEYDOWN:
    if event.key == pygame.K_r:
        robot_x = 0
        robot_y = 0
        robot_direction = 0
    
    if event.key == pygame.K_c:
        trail.clear()  # –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é
```

`clear()` ‚Äî –º–µ—Ç–æ–¥ deque, —É–¥–∞–ª—è–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã.

---

### –®–∞–≥ 9: –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏
```python
info_texts = [
    f"–ü–æ–∑–∏—Ü–∏—è: ({x:.1f}, {y:.1f})",
    f"–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: {direction:.1f}¬∞",
    f"–°–ª–µ–¥: {len(trail)} —Ç–æ—á–µ–∫",  # –ù–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞!
    "",
    "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:",
    "W A S D - –¥–≤–∏–∂–µ–Ω–∏–µ",
    "Q E - –ø–æ–≤–æ—Ä–æ—Ç",
    "R - —Å–±—Ä–æ—Å –≤ —Ü–µ–Ω—Ç—Ä",
    "C - –æ—á–∏—Å—Ç–∏—Ç—å —Å–ª–µ–¥"  # –ù–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞!
]
```

–§—É–Ω–∫—Ü–∏—é `draw_info` –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å, —á—Ç–æ–±—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å `trail`:
```python
def draw_info(screen, x, y, direction, trail, font):
```

–ò –≤—ã–∑–æ–≤:
```python
draw_info(screen, robot_x, robot_y, robot_direction, trail, font)
```

---

## üöÄ –Ø—á–µ–π–∫–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–¥–∞

```python
import pygame
import math
from collections import deque  # TODO: –ù–µ –∑–∞–±—É–¥—å—Ç–µ –∏–º–ø–æ—Ä—Ç!

pygame.init()

WIDTH = 800
HEIGHT = 600
screen = pygame.display.set_mode((WIDTH, HEIGHT))
clock = pygame.time.Clock()

WHITE = (255, 255, 255)
BLACK = (0, 0, 0)
BLUE = (0, 100, 255)

font = pygame.font.Font(None, 24)

# TODO: –û–±–Ω–æ–≤–∏—Ç–µ draw_info - –¥–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä trail
def draw_info(screen, x, y, direction, trail, font):
    info_texts = [
        f"–ü–æ–∑–∏—Ü–∏—è: ({x:.1f}, {y:.1f})",
        f"–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: {direction:.1f}¬∞",
        f"–°–ª–µ–¥: {len(trail)} —Ç–æ—á–µ–∫",
        "",
        "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:",
        "W A S D - –¥–≤–∏–∂–µ–Ω–∏–µ",
        "Q E - –ø–æ–≤–æ—Ä–æ—Ç",
        "R - —Å–±—Ä–æ—Å –≤ —Ü–µ–Ω—Ç—Ä",
        "C - –æ—á–∏—Å—Ç–∏—Ç—å —Å–ª–µ–¥"
    ]
    
    y_offset = 10
    for text in info_texts:
        surface = font.render(text, True, BLACK)
        screen.blit(surface, (10, y_offset))
        y_offset += 25

def draw_robot(screen, x, y, direction, radius):
    # ... –≤–∞—à –∫–æ–¥ –∏–∑ –∑–∞–¥–∞–Ω–∏—è 4.2 ...

# TODO: –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é draw_trail(screen, trail)
def draw_trail(screen, trail):
    """–†–∏—Å—É–µ—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –¥–≤–∏–∂–µ–Ω–∏—è"""
    # TODO: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ len(trail) >= 2
    
    # TODO: –ü—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ –≤—Å–µ —Ç–æ—á–∫–∏ –≤ —ç–∫—Ä–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
    screen_points = []
    # for x, y in trail:
    #     ...
    
    # TODO: –ù–∞—Ä–∏—Å—É–π—Ç–µ –ª–∏–Ω–∏–∏
    # if len(screen_points) >= 2:
    #     pygame.draw.lines(...)

robot_x = 0
robot_y = 0
robot_direction = 0
move_speed = 3
turn_speed = 3

# TODO: –°–æ–∑–¥–∞–π—Ç–µ deque –¥–ª—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
trail = deque(maxlen=150)

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_r:
                robot_x = 0
                robot_y = 0
                robot_direction = 0
            
            # TODO: –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–ª–∞–≤–∏—à–∏ C
            # if event.key == pygame.K_c:
            #     trail.clear()
    
    keys = pygame.key.get_pressed()
    
    # –ü–æ–≤–æ—Ä–æ—Ç—ã
    if keys[pygame.K_q]:
        robot_direction += turn_speed
        robot_direction %= 360
    if keys[pygame.K_e]:
        robot_direction -= turn_speed
        robot_direction %= 360
    
    # –î–≤–∏–∂–µ–Ω–∏–µ
    if keys[pygame.K_w]:
        angle = math.radians(robot_direction)
        robot_x += math.cos(angle) * move_speed
        robot_y += math.sin(angle) * move_speed
    
    if keys[pygame.K_s]:
        angle = math.radians(robot_direction)
        robot_x -= math.cos(angle) * move_speed
        robot_y -= math.sin(angle) * move_speed
    
    if keys[pygame.K_a]:
        angle = math.radians(robot_direction + 90)
        robot_x += math.cos(angle) * move_speed
        robot_y += math.sin(angle) * move_speed
    
    if keys[pygame.K_d]:
        angle = math.radians(robot_direction - 90)
        robot_x += math.cos(angle) * move_speed
        robot_y += math.sin(angle) * move_speed
    
    # TODO: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –≤ trail
    # trail.append((robot_x, robot_y))
    
    screen.fill(WHITE)
    
    # TODO: –ù–∞—Ä–∏—Å—É–π—Ç–µ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –ü–ï–†–ï–î —Ä–æ–±–æ—Ç–æ–º
    # draw_trail(screen, trail)
    
    draw_robot(screen, robot_x, robot_y, robot_direction, 15)
    draw_info(screen, robot_x, robot_y, robot_direction, trail, font)
    
    pygame.display.flip()
    clock.tick(60)

pygame.quit()
```

---

## ‚úÖ –Ø—á–µ–π–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- –°–∏–Ω—é—é –ª–∏–Ω–∏—é, —Å–ª–µ–¥—É—é—â—É—é –∑–∞ —Ä–æ–±–æ—Ç–æ–º
- –õ–∏–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –¥–ª–∏–Ω–æ–π (—Å—Ç–∞—Ä—ã–µ —É—á–∞—Å—Ç–∫–∏ –∏—Å—á–µ–∑–∞—é—Ç)
- –°—á–µ—Ç—á–∏–∫ —Ç–æ—á–µ–∫ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
- –ö–ª–∞–≤–∏—à–∞ C –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç —Å–ª–µ–¥
- –ü—Ä–∏ —Å–±—Ä–æ—Å–µ R —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è –ù–ï –æ—á–∏—â–∞–µ—Ç—Å—è (—Ä–æ–±–æ—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è)

**–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã:**
1. –ü–æ–µ–∑–¥–∏—Ç–µ –ø–æ –∫—Ä—É–≥—É ‚Üí —É–≤–∏–¥–∏—Ç–µ –∫—Ä—É–≥–ª—ã–π —Å–ª–µ–¥
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ, –Ω–µ –¥–≤–∏–≥–∞—è—Å—å ‚Üí —Å—Ç–∞—Ä—ã–µ —Ç–æ—á–∫–∏ –∏—Å—á–µ–∑–Ω—É—Ç, –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∞—è
3. –ò–∑–º–µ–Ω–∏—Ç–µ `maxlen=50` ‚Üí –∫–æ—Ä–æ—Ç–∫–∏–π —Å–ª–µ–¥
4. –ò–∑–º–µ–Ω–∏—Ç–µ `maxlen=300` ‚Üí –¥–ª–∏–Ω–Ω—ã–π —Å–ª–µ–¥

---

## ‚≠ê –ó–∞–¥–∞–Ω–∏–µ —Å–æ –∑–≤–µ–∑–¥–æ—á–∫–æ–π: –ó–∞—Ç—É—Ö–∞–Ω–∏–µ —Å–ª–µ–¥–∞

–°–µ–π—á–∞—Å –≤–µ—Å—å —Å–ª–µ–¥ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π. –°–¥–µ–ª–∞–µ–º —Ç–∞–∫, —á—Ç–æ–±—ã —Å—Ç–∞—Ä—ã–µ —É—á–∞—Å—Ç–∫–∏ –±—ã–ª–∏ **–±–ª–µ–¥–Ω–µ–µ**!

### –¢–µ–æ—Ä–∏—è: –ê–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª –∏ Surface

–î–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ:
1. –°–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é Surface
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª
3. –†–∏—Å–æ–≤–∞—Ç—å –Ω–∞ –Ω–µ–π
4. Blit –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω

```python
temp_surface = pygame.Surface((WIDTH, HEIGHT))
temp_surface.set_colorkey((0, 0, 0))  # –ß–µ—Ä–Ω—ã–π = –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π
temp_surface.set_alpha(128)  # –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
```

### –°–ø–æ—Å–æ–± 1: –ù–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ —Å —Ä–∞–∑–Ω–æ–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é

–†–∞–∑–¥–µ–ª–∏–º —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç—ã:
- –ù–æ–≤–µ–π—à–∏–π 20% ‚Üí –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π
- –°—Ä–µ–¥–Ω–∏–π 40% ‚Üí –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π
- –°—Ç–∞—Ä—ã–π 40% ‚Üí –æ—á–µ–Ω—å –±–ª–µ–¥–Ω—ã–π

```python
def draw_trail(screen, trail):
    if len(trail) < 2:
        return
    
    screen_points = []
    for x, y in trail:
        screen_x = int(x + WIDTH/2)
        screen_y = int(HEIGHT/2 - y)
        screen_points.append((screen_x, screen_y))
    
    if len(screen_points) < 2:
        return
    
    total = len(screen_points)
    
    # –î–µ–ª–∏–º –Ω–∞ 3 —Å–µ–≥–º–µ–Ω—Ç–∞
    third = total // 3
    
    # –°—Ç–∞—Ä–∞—è —á–∞—Å—Ç—å (0 - 1/3) - –æ—á–µ–Ω—å –±–ª–µ–¥–Ω–∞—è
    if third >= 2:
        segment = screen_points[:third]
        pygame.draw.lines(screen, (180, 180, 230), False, segment, 1)
    
    # –°—Ä–µ–¥–Ω—è—è —á–∞—Å—Ç—å (1/3 - 2/3) - —Å—Ä–µ–¥–Ω—è—è
    if total > third * 2 and third >= 1:
        segment = screen_points[third:third*2]
        if len(segment) >= 2:
            pygame.draw.lines(screen, (130, 130, 240), False, segment, 2)
    
    # –ù–æ–≤–∞—è —á–∞—Å—Ç—å (2/3 - –∫–æ–Ω–µ—Ü) - —è—Ä–∫–∞—è
    if total > third * 2:
        segment = screen_points[third*2:]
        if len(segment) >= 2:
            pygame.draw.lines(screen, (80, 80, 255), False, segment, 3)
```

### –°–ø–æ—Å–æ–± 2: –ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ (—Å–ª–æ–∂–Ω–µ–µ, –Ω–æ –∫—Ä–∞—Å–∏–≤–µ–µ)

–†–∏—Å—É–µ–º –º–Ω–æ–≥–æ –º–∞–ª–µ–Ω—å–∫–∏—Ö –ª–∏–Ω–∏–π —Å —Ä–∞–∑–Ω–æ–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é:

```python
def draw_trail_fade(screen, trail):
    """–†–∏—Å—É–µ—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é —Å –ø–ª–∞–≤–Ω—ã–º –∑–∞—Ç—É—Ö–∞–Ω–∏–µ–º"""
    if len(trail) < 2:
        return
    
    screen_points = []
    for x, y in trail:
        screen_x = int(x + WIDTH/2)
        screen_y = int(HEIGHT/2 - y)
        screen_points.append((screen_x, screen_y))
    
    if len(screen_points) < 2:
        return
    
    # –†–∏—Å—É–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã —Å —Ä–∞–∑–Ω–æ–π —è—Ä–∫–æ—Å—Ç—å—é
    total = len(screen_points)
    
    for i in range(total - 1):
        # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞—Ç—É—Ö–∞–Ω–∏—è: –æ—Ç 0 (—Å—Ç–∞—Ä–æ–µ) –¥–æ 1 (–Ω–æ–≤–æ–µ)
        fade = i / max(total - 1, 1)
        
        # –¶–≤–µ—Ç: –æ—Ç –±–ª–µ–¥–Ω–æ–≥–æ (200) –¥–æ —è—Ä–∫–æ–≥–æ (50)
        brightness = int(200 - fade * 150)  # 200 -> 50
        color = (brightness, brightness, 255)
        
        # –¢–æ–ª—â–∏–Ω–∞: –æ—Ç 1 –¥–æ 3
        width = 1 + int(fade * 2)
        
        # –†–∏—Å—É–µ–º –æ–¥–∏–Ω —Å–µ–≥–º–µ–Ω—Ç
        start = screen_points[i]
        end = screen_points[i + 1]
        pygame.draw.line(screen, color, start, end, width)
```

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∑–≤–µ–∑–¥–æ—á–∫–∏

1. –ó–∞–º–µ–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `draw_trail` –Ω–∞ –æ–¥–Ω—É –∏–∑ –≤–µ—Ä—Å–∏–π –≤—ã—à–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ:
   - **–°–ø–æ—Å–æ–± 1** ‚Äî –ø—Ä–æ—â–µ, 3 —É—Ä–æ–≤–Ω—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
   - **–°–ø–æ—Å–æ–± 2** ‚Äî —Å–ª–æ–∂–Ω–µ–µ, –ø–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ
3. –ü–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å —Ü–≤–µ—Ç–∞–º–∏ –∏ —Ç–æ–ª—â–∏–Ω–æ–π

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –°–ª–µ–¥ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
```python
# –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
if keys[pygame.K_w] or keys[pygame.K_s] or keys[pygame.K_a] or keys[pygame.K_d]:
    trail.append((robot_x, robot_y))
```

### 2. –†–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∫–æ—Ä–æ—Å—Ç–µ–π
```python
# –í—ã—á–∏—Å–ª—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è
if len(trail) >= 2:
    prev_x, prev_y = trail[-2]
    dist = math.sqrt((robot_x - prev_x)**2 + (robot_y - prev_y)**2)
    # –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç dist
```

### 3. –ü—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –ª–∏–Ω–∏—è
```python
# –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∫–∞–∂–¥—É—é 5-—é —Ç–æ—á–∫—É
if len(trail) % 5 == 0:
    trail.append((robot_x, robot_y))
```

### 4. –°–ª–µ–¥ –∏—Å—á–µ–∑–∞–µ—Ç –ø—Ä–∏ —Å–±—Ä–æ—Å–µ R
```python
if event.key == pygame.K_r:
    robot_x = 0
    robot_y = 0
    robot_direction = 0
    trail.clear()  # –î–æ–±–∞–≤–∏—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É
```

---

## üé® –ö—Ä–∞—Å–∏–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

### –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ª–µ–¥ (Rainbow trail)
```python
def draw_trail_rainbow(screen, trail):
    # ... –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç ...
    
    for i in range(len(screen_points) - 1):
        # HSV ‚Üí RGB –¥–ª—è —Ä–∞–¥—É–∂–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
        hue = (i / len(screen_points)) * 360
        # –£–ø—Ä–æ—â–µ–Ω–Ω–æ: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞
        colors = [
            (255, 100, 100),  # –ö—Ä–∞—Å–Ω—ã–π
            (255, 200, 100),  # –û—Ä–∞–Ω–∂–µ–≤—ã–π
            (255, 255, 100),  # –ñ–µ–ª—Ç—ã–π
            (100, 255, 100),  # –ó–µ–ª–µ–Ω—ã–π
            (100, 100, 255),  # –°–∏–Ω–∏–π
        ]
        color_idx = (i * len(colors)) // len(screen_points)
        color = colors[color_idx]
        
        pygame.draw.line(screen, color, screen_points[i], screen_points[i+1], 2)
```

### –ß–∞—Å—Ç–∏—Ü—ã –≤–º–µ—Å—Ç–æ –ª–∏–Ω–∏–∏
```python
# –í–º–µ—Å—Ç–æ –ª–∏–Ω–∏–∏ ‚Äî —Ä–∏—Å—É–µ–º –º–∞–ª–µ–Ω—å–∫–∏–µ –∫—Ä—É–≥–∏
for i, (screen_x, screen_y) in enumerate(screen_points):
    fade = i / max(len(screen_points), 1)
    radius = 1 + int(fade * 3)
    pygame.draw.circle(screen, (100, 100, 255), (screen_x, screen_y), radius)
```

---

## üèÜ –ò—Ç–æ–≥–∏

**–ß—Ç–æ –≤—ã –∏–∑—É—á–∏–ª–∏:**
‚úÖ `collections.deque` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏  
‚úÖ `pygame.draw.lines()` –¥–ª—è –ø–æ–ª–∏–ª–∏–Ω–∏–π  
‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç  
‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞)  
‚úÖ ‚≠ê –ó–∞—Ç—É—Ö–∞–Ω–∏–µ –∏ –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã  

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:**
- –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è: —Å—Ä–µ–¥–Ω—è—è (‚≠ê‚≠ê‚≠ê)
- –°–æ –∑–≤–µ–∑–¥–æ—á–∫–æ–π: –≤—ã—Å–æ–∫–∞—è (‚≠ê‚≠ê‚≠ê‚≠ê)

---

## üîç –û—Ç–ª–∞–¥–∫–∞

**–°–ª–µ–¥ –Ω–µ —Ä–∏—Å—É–µ—Ç—Å—è?**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `len(trail) >= 2`
- –í—ã–≤–µ–¥–∏—Ç–µ `print(len(trail))` ‚Äî –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ª–∏ —Ç–æ—á–∫–∏?
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤: —Å–Ω–∞—á–∞–ª–∞ trail, –ø–æ—Ç–æ–º robot

**–°–ª–µ–¥ –ø—Ä–µ—Ä—ã–≤–∏—Å—Ç—ã–π?**
- –í–æ–∑–º–æ–∂–Ω–æ, `trail.append()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
- –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ append –≤ –∫–æ–Ω–µ—Ü —Ü–∏–∫–ª–∞, –±–µ–∑ —É—Å–ª–æ–≤–∏–π

**–°–ª–µ–¥ —Å—Ç—Ä–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º—ã?**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ ‚Üí —ç–∫—Ä–∞–Ω–Ω—ã–µ)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã

**–ó–∞—Ç—É—Ö–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∏—Å—É–µ—Ç–µ —Å–µ–≥–º–µ–Ω—Ç—ã –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ `fade` (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 0 –¥–æ 1)

