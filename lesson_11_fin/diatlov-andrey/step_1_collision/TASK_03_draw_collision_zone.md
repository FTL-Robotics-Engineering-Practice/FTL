# Задание 3: Отрисовка зоны коллизий

## Описание

Нужно реализовать метод `draw_collision_zone()` в классе `Renderer`, который будет визуализировать зоны обнаружения коллизий вокруг робота.

## Что нужно сделать

Метод должен:
- Получить клетки переднего и заднего секторов
- Для каждой клетки определить цвет (зеленый если свободно, красный если препятствие)
- Нарисовать полупрозрачные квадраты в этих клетках

## Доступные переменные и параметры

### Параметры метода:
- `robot` - объект Robot
- `grid` - объект Grid

### Доступные поля:
- `self.screen` - экран pygame для рисования

### Доступные методы:
- `robot.get_sector_cells(grid, angle_offset)` - получить клетки в секторе
- `grid.is_cell_filled(col, row)` - проверить, есть ли в клетке препятствие

## Константы для использования

```python
# Цвета для визуализации
color_free = (100, 255, 100)      # Зеленый - свободно
color_obstacle = (255, 100, 100)  # Красный - препятствие
alpha = 80                         # Прозрачность
```

## Логика решения

1. **Получить клетки обоих секторов:**
   - Получить клетки переднего сектора: `robot.get_sector_cells(grid, angle_offset=0)`
   - Получить клетки заднего сектора: `robot.get_sector_cells(grid, angle_offset=math.pi)`

2. **Нарисовать передний сектор:**
   - Перебрать все клетки из переднего сектора
   - Для каждой клетки `(col, row)`:
     
     a) **Вычислить позицию клетки в пикселях:**
     - `x = col * grid.cell_width + grid.offset_x`
     - `y = row * grid.cell_height`
     
     b) **Определить цвет:**
     - Если `grid.is_cell_filled(col, row)` - использовать красный цвет `(255, 100, 100)`
     - Иначе - использовать зеленый цвет `(100, 255, 100)`
     
     c) **Создать и нарисовать полупрозрачную поверхность:**
     - Создать поверхность: `surface = pygame.Surface((grid.cell_width, grid.cell_height))`
     - Установить прозрачность: `surface.set_alpha(80)`
     - Залить цветом: `surface.fill(color)`
     - Нарисовать на экране: `self.screen.blit(surface, (x, y))`

3. **Нарисовать задний сектор:**
   - Аналогично нарисовать все клетки из заднего сектора

## Пример структуры кода

```python
# Получаем клетки переднего сектора
forward_cells = robot.get_sector_cells(grid, angle_offset=0)

# Получаем клетки заднего сектора
backward_cells = robot.get_sector_cells(grid, angle_offset=...)

# Рисуем передний сектор
for col, row in forward_cells:
    x = ...
    y = ...
    
    # Определяем цвет
    if grid.is_cell_filled(col, row):
        color = ...  # Красный
    else:
        color = ...  # Зеленый
    
    # Создаем полупрозрачную поверхность и рисуем
    surface = pygame.Surface((..., ...))
    surface.set_alpha(...)
    surface.fill(color)
    self.screen.blit(surface, (..., ...))

# Аналогично для заднего сектора
...
```

## Модуль pygame.Surface

Для создания полупрозрачных поверхностей используется pygame:
- `pygame.Surface((width, height))` - создать новую поверхность
- `surface.set_alpha(value)` - установить прозрачность (0-255, где 255 = непрозрачно)
- `surface.fill(color)` - залить цветом (цвет = кортеж (R, G, B))
- `screen.blit(surface, (x, y))` - нарисовать поверхность на экране

## Проверка

После реализации запустите программу:

```bash
python code/main.py
```

Вы должны увидеть зеленые и красные полупрозрачные клетки вокруг робота, показывающие зоны обнаружения коллизий.
