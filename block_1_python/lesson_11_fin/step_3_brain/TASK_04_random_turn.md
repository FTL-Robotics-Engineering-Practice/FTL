# Задание 4: Случайный поворот при нулевой ошибке

## Описание

Нужно обработать особый случай: когда препятствие находится точно по курсу робота. В этой ситуации робот "не знает", в какую сторону повернуть (влево или вправо одинаково хорошо), и может "застрять".

## Проблема

Когда препятствие точно впереди:
- `angle_diff ≈ 0°` 
- `target_angle = 0°` (т.к. `sign(0) = 0`)
- `error ≈ 0°`
- `angular_velocity ≈ 0` (робот не поворачивает!)
- Робот врезается в препятствие

## Решение

Когда угол к препятствию очень мал (меньше 5°), нужно:
1. **Выбрать случайное направление** поворота (влево или вправо)
2. **Установить постоянную угловую скорость** в этом направлении
3. **Остановить линейное движение** (чтобы робот не врезался, пока поворачивается)
4. **Установить target_angle** для корректного отображения в интерфейсе

## Логика

Эта проверка должна быть **ДО** вычисления target_angle и П-регулятора.

Если модуль `angle_diff` меньше `math.radians(5)`:
1. Выберите случайное число -1 или 1 (направление поворота). Используйте `random.choice`.
2. Рассчитайте `angular_velocity`: 50% от максимальной скорости (`self.max_angular_velocity`) умножить на выбранное направление.
3. Установите скорости робота: линейная 0, угловая - рассчитанная выше.
4. Установите `self.target_angle` равным 90 градусам (умножить на направление), чтобы в интерфейсе отобразилась цель.
5. Сделайте `return`, чтобы прервать выполнение функции и не запускать основной П-регулятор.

## Место вставки кода

Вставьте этот код **ПОСЛЕ** нормализации `angle_diff`, но **ДО** вычисления `target_angle` и П-регулятора.

## Импорт random

Не забудьте, что модуль `random` уже импортирован в начале файла:

```python
import random
```

## Проверка

Для проверки этого случая:
1. Нарисуйте препятствие ровно впереди робота
2. Запустите робота (TAB)
3. Робот должен выбрать случайное направление и начать поворачивать
4. После поворота на несколько градусов, включится обычный П-регулятор

## Поведение

При срабатывании этой логики:
- Робот останавливается (linear_velocity = 0)
- Начинает поворачиваться в случайную сторону
- После поворота на 5°+ препятствие оказывается сбоку
- Включается П-регулятор, робот продолжает огибать препятствие

## Почему это работает?

1. **Разрыв симметрии**: выбор случайного направления разрушает симметричную ситуацию
2. **Гарантированный выход**: робот обязательно повернёт в какую-то сторону
3. **Плавный переход**: после поворота на 5° включается П-регулятор

## Альтернативные стратегии

Вместо случайного поворота можно:
- Всегда поворачивать в одну сторону (например, налево)
- Запомнить предыдущее направление и продолжить его
- Использовать более сложную логику принятия решений

Но случайный выбор - самое простое и эффективное решение для большинства случаев.
