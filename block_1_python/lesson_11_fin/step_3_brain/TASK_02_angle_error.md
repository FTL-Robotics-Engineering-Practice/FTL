# Задание 2: Вычисление ошибки угла

## Описание

Нужно вычислить ошибку между текущим положением препятствия относительно робота и желаемым положением (90° сбоку).

## Что такое ошибка?

**Ошибка** - это разница между текущим и желаемым состоянием системы.

В нашем случае:
- **Текущее состояние:** угол от робота к препятствию (`angle_diff`)
- **Желаемое состояние:** препятствие должно быть под углом 90° (`target_angle`)
- **Ошибка:** `error = angle_diff - target_angle`

## Примеры

### Пример 1: Препятствие слева под углом 60°
- `angle_diff = 60°` (препятствие слева)
- `target_angle = 90°` (хотим повернуть еще на 30° налево)
- `error = 60° - 90° = -30°`
- Отрицательная ошибка → нужно еще повернуть налево

### Пример 2: Препятствие слева под углом 120°
- `angle_diff = 120°` (препятствие слева)
- `target_angle = 90°` (нужно повернуть назад на 30°)
- `error = 120° - 90° = 30°`
- Положительная ошибка → перекрутили, вернуться назад

### Пример 3: Препятствие ровно сбоку
- `angle_diff = 90°` (препятствие точно слева)
- `target_angle = 90°`
- `error = 90° - 90° = 0°`
- Ошибка нулевая → цель достигнута, поворачивать не нужно

## Формула

```python
error = angle_diff - target_angle
```

Где:
- `angle_diff` - угол от робота к препятствию (в радианах)
- `target_angle` - целевой угол, вычисленный в предыдущем задании (±π/2)
- `error` - ошибка, которую нужно исправить (в радианах)

## Место вставки кода

Найдите в файле `brain.py` метод `update()` и место с комментарием:

```python
# TODO: Вычислить ошибку угла
# error = ...
```

Замените комментарий на реализацию.

## Проверка

На данном этапе робот еще не будет поворачивать (это будет в следующем задании), но вы можете вывести ошибку в консоль для отладки:

```python
error = angle_diff - target_angle
print(f"Ошибка: {math.degrees(error):.1f}°")
```

Запустите программу и понаблюдайте, как меняется ошибка при поворотах робота (A/D).

## Интерпретация значений ошибки

- **error > 0**: робот перекрутил, нужно повернуть назад
- **error < 0**: робот недокрутил, нужно докрутить
- **error ≈ 0**: цель достигнута, препятствие сбоку

## Что дальше?

В следующем задании мы используем эту ошибку для управления угловой скоростью робота через П-регулятор.

## Полная структура кода

```python
def update(self, robot, sight, grid):
    """Обновить управление роботом"""
    
    # ... предыдущий код ...
    
    # Определить целевой угол (из предыдущего задания)
    target_angle = math.pi/2 * np.sign(angle_diff)
    self.target_angle = target_angle
    
    # TODO: Вычислить ошибку угла
    # error = angle_diff - target_angle
    
    # TODO (следующие задания): применить П-регулятор, установить скорости
```

## Подсказка

Ошибка вычисляется простым вычитанием. Не забудьте, что все углы в радианах!
